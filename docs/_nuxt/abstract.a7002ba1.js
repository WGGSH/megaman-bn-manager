import{_ as fe}from"./accept.872311fb.js";import{a as ge,r as n,o as m,c as M,w as t,b as he,e as K,f as S,F as I,h as B,i as Ce,j as ye,k as xe,l as y,m as c,p as G,q as Ne,s as e,t as s,u as z,v as ze}from"./entry.c56beb5c.js";import{_ as be,a as ke}from"./subtitle.c9b4825a.js";import{C as Pe,_ as Se}from"./color-text.e38147eb.js";import{C as Ie,_ as Me}from"./chip-folder.17157554.js";import{u as Ve,N as H,a as Be,M as J,_ as we}from"./megaman-status.bbd57e89.js";import{u as $e,_ as Ae}from"./master-patch-card.7171fd5d.js";import"./VDataTable.9d55f6aa.js";const Ee={};function Fe(x,_){const v=n("v-btn");return m(),M(v,{color:"red"},{default:t(()=>[he(x.$slots,"default")]),_:3})}const Te=ge(Ee,[["render",Fe]]),Ue=K({__name:"navi-customizer-text",props:{registeredNaviCustomizerPrograms:{type:Array,required:!0},masterNaviCustomizerPrograms:{type:Array,required:!0}},setup(x){const _=x,v=b=>{const a=_.masterNaviCustomizerPrograms.find(i=>i.id===b.programId);return`${a.name}: ${Pe.colorToTextMap[a.color]}`};return(b,a)=>{const i=n("v-list-item"),f=n("v-card");return m(),M(f,{class:"pa-8",width:"100%"},{default:t(()=>[(m(!0),S(I,null,B(x.registeredNaviCustomizerPrograms,p=>(m(),M(i,{key:p.id,title:v(p)},null,8,["title"]))),128))]),_:1})}}}),qe=80,Oe=K({__name:"abstract",setup(x){const _=Ce(),v=ye(),b=xe(),a=y(()=>_.selectedBuild),i=c(),f=c([]),p=c(),k=c(!1),O=Ve(),Q=y(()=>O.programs),g=c(new H),W=y(()=>g.value.cells),X=y(()=>g.value.registeredNaviCustomizerPrograms),V=c(new Ie),w=c(0),$=c([]),Y=y(()=>$.value.map(o=>V.value.chips.find(d=>d.id===o))),A=Be(),E=$e(),N=c([]),h=c(new J),Z=y(()=>{let o=0;return N.value.forEach(l=>{l.isActive&&(o+=Number(l.capacity))}),o}),ee=()=>{a.value&&(N.value=a.value.patchCards.map(o=>{const l=E.getCardById(o.id);if(!l)return null;const d=l.clone();return o.isActive||d.toggleActive(),d}).filter(o=>o!==null))},te=[{key:"G",name:"グレイガ"},{key:"F",name:"ファルザー"}],F=()=>{a.value&&(g.value=new H,a.value.registeredNaviCustomizerPrograms.forEach(o=>{g.value.addProgram(o)}))},ae=()=>{a.value&&(V.value.chips=a.value.folderChips.map((o,l)=>({id:l+1,chipId:o.chipId,codeIndex:o.codeIndex})).filter(o=>o!==null),a.value.regularChipId&&(w.value=a.value.regularChipId),a.value.tagChipIds&&($.value=a.value.tagChipIds))},T=()=>{!a.value||!a.value.id||(i.value=a.value.name,f.value=a.value.versions,p.value=a.value.hpMemoryNum,F(),ae(),ee())};G(a,o=>{o&&T()},{deep:!0}),G(N,o=>{h.value=new J,a.value&&(h.value.hpMemoryNum=a.value.hpMemoryNum,F(),A.update(a.value.hpMemoryNum,g.value.registeredNaviCustomizerPrograms,g.value.cells),A.naviCustomizerStatus.megamanStatus.abilities.forEach(l=>{h.value.pushAbility(l)}),o.forEach(l=>{l.isActive&&l.abilities.forEach(d=>{h.value.pushAbility(d)})}),h.value.apply())},{deep:!0}),Ne(()=>{E.fetchCards(),_.setSelectedBuildById(b.params.id),a?T():v.push({path:"/"})});const le=()=>{_.updateBuildById({id:a.value.id,name:i.value,versions:f.value,hpMemoryNum:p.value})},oe=()=>{k.value=!0},ue=()=>{_.deleteBuildById(a.value.id),v.push({path:"/"})};return(o,l)=>{const d=n("v-card-title"),U=fe,q=Te,re=n("v-card-actions"),L=n("v-card"),ne=n("v-dialog"),se=be,u=n("v-row"),R=n("v-container"),C=ke,j=n("v-text-field"),ce=n("v-checkbox"),P=n("v-col"),D=n("v-divider"),ie=Se,de=Ue,me=Me,_e=we,pe=Ae;return m(),S(I,null,[e(R,null,{default:t(()=>[e(ne,{modelValue:k.value,"onUpdate:modelValue":l[1]||(l[1]=r=>k.value=r)},{default:t(()=>[e(L,null,{default:t(()=>[e(d,null,{default:t(()=>[s(" 本当に削除しますか？ ")]),_:1}),e(re,null,{default:t(()=>[e(U,{onClick:l[0]||(l[0]=r=>k.value=!1)},{default:t(()=>[s(" キャンセル ")]),_:1}),e(q,{color:"red",onClick:ue},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,null,{default:t(()=>[s(" ビルド概要 ")]),_:1}),e(u,{class:"ma-0"},{default:t(()=>[e(U,{class:"mr-auto",onClick:le},{default:t(()=>[s(" 保存する ")]),_:1}),e(q,{onClick:oe},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1}),e(R,{class:"pa-8"},{default:t(()=>[e(u,null,{default:t(()=>[e(C,null,{default:t(()=>[s(" ビルド名 ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(j,{modelValue:i.value,"onUpdate:modelValue":l[2]||(l[2]=r=>i.value=r)},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(C,null,{default:t(()=>[s(" 対応バージョン ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[(m(),S(I,null,B(te,r=>e(P,{key:r.key},{default:t(()=>[e(ce,{modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=ve=>f.value=ve),label:r.name,value:r.key},null,8,["modelValue","label","value"])]),_:2},1024)),64))]),_:1}),e(u,null,{default:t(()=>[e(C,null,{default:t(()=>[s(" HPメモリ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(j,{modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=r=>p.value=r),type:"number",max:"45",min:"0"},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(D)]),_:1}),e(u,null,{default:t(()=>[e(C,null,{default:t(()=>[s(" ナビカスタマイザー ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(P,{cols:"12"},{default:t(()=>[e(ie,{cells:z(W)},null,8,["cells"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(P,{cols:"12"},{default:t(()=>[e(de,{"registered-navi-customizer-programs":z(X),"master-navi-customizer-programs":z(Q)},null,8,["registered-navi-customizer-programs","master-navi-customizer-programs"])]),_:1})]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(D)]),_:1}),e(u,null,{default:t(()=>[e(C,null,{default:t(()=>[s(" フォルダ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(me,{"chip-folder":V.value,"regular-chip-id":w.value,"tag-chips":z(Y),"read-only":""},null,8,["chip-folder","regular-chip-id","tag-chips"])]),_:1}),e(u,null,{default:t(()=>[e(C,null,{default:t(()=>[s(" 改造カード ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(_e,{"megaman-status":h.value,"max-capacity":qe,"current-capacity":z(Z)},null,8,["megaman-status","current-capacity"])]),_:1}),e(u,null,{default:t(()=>[e(P,{class:"pa-0"},{default:t(()=>[e(L,{class:ze(["px-0 mt-4 mx-0",{"py-8":N.value.length===0}]),color:"primary"},{default:t(()=>[(m(!0),S(I,null,B(N.value,r=>(m(),M(pe,{key:r.id,"patch-card":r,class:"ma-4"},null,8,["patch-card"]))),128))]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})],64)}}});export{Oe as default};
