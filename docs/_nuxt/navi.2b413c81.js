import{_ as Q,a as X}from"./subtitle.4ce63455.js";import{_ as Y}from"./accept.d840275c.js";import{_ as Z,u as ee,N as E,a as te}from"./megaman-status.0a64e323.js";import{e as T,r as u,o as p,c as I,w as t,q as e,k as y,l as q,p as V,u as c,s as O,t as h,A as L,x as W,F as U,j as R,v as ae,y as F,z as re,a as oe,h as se,i as ne,f as le,m as ue}from"./entry.bb13f739.js";import{C as ce,_ as ie}from"./color-text.b1444b98.js";import{V as me}from"./VDataTable.394959b7.js";const de=T({__name:"navi-customizer-status",props:{naviCustomizerStatus:{type:Object,required:!0}},setup(g){return(S,o)=>{const s=Z,i=u("v-card");return p(),I(i,{height:"100%"},{default:t(()=>[e(s,{"megaman-status":g.naviCustomizerStatus.megamanStatus,"max-capacity":0,"current-capacity":0},null,8,["megaman-status","max-capacity","current-capacity"])]),_:1})}}}),_e=T({__name:"navi-customizer-program",props:{programs:{type:Array,required:!0},selectedProgram:{type:Object,required:!1,default:null}},emits:["update-selected-program"],setup(g,{emit:S}){const o=g,s=y([]);q(s,f=>{f.length===0?S("update-selected-program",null):S("update-selected-program",f[0])}),q(o,()=>{o.selectedProgram&&(s.value=[o.selectedProgram])});const i=y(""),m=y(10),b=[{title:"名前",key:"name",align:"center",sortable:!0},{title:"プログラムパーツ",key:"isProgram",align:"center",sortable:!0},{title:"色",key:"color",align:"center",sortable:!0}],_=f=>f;return(f,v)=>{const C=u("v-text-field"),B=u("v-icon");return p(),V(U,null,[e(C,{modelValue:c(i),"onUpdate:modelValue":v[0]||(v[0]=P=>O(i)?i.value=P:null),"append-icon":"mdi-magnify",label:"検索","single-line":"","hide-details":""},null,8,["modelValue"]),e(c(me),{modelValue:c(s),"onUpdate:modelValue":v[1]||(v[1]=P=>O(s)?s.value=P:null),"items-per-page":c(m),headers:b,items:g.programs,search:c(i),"item-value":"name",class:"elevation-1","multi-sort":"",density:"compact","show-select":"","return-object":"","select-strategy":"single"},{["item.isProgram"]:t(P=>[_(P.item.selectable).isProgram?(p(),I(B,{key:0},{default:t(()=>[h(" mdi-check ")]),_:1})):L("",!0)]),["item.color"]:t(P=>[h(W(c(ce).colorToTextMap[_(P.item.selectable).color]),1)]),_:2},1032,["modelValue","items-per-page","items","search"])],64)}}}),ve={class:"program"},pe=T({__name:"navi-customizer-program",props:{naviCustomizerProgram:{type:Object,required:!1,default:null}},emits:["update-program-state"],setup(g,{emit:S}){const o=g,s=y(0),i=y({isCompressed:!0,rotate:0}),m=y(5),b=y(!0),_=R(()=>o.naviCustomizerProgram===null?0:Math.max(o.naviCustomizerProgram.cells.length,o.naviCustomizerProgram.cells[0].length)),f=R(()=>{let z=0;switch(_.value){case 1:case 2:z=2;break;case 3:case 4:z=1;break;case 5:z=0;break;default:z=0;break}const k=[];for(let a=0;a<m.value;a++){const n=[];for(let l=0;l<m.value;l++)n.push(!1);k.push(n)}if(o.naviCustomizerProgram===null)return k;for(let a=0;a<o.naviCustomizerProgram.cells.length;a++)for(let n=0;n<o.naviCustomizerProgram.cells[a].length;n++){let l,d;switch(s.value){case 0:l=a,d=n;break;case 1:l=n,d=o.naviCustomizerProgram.cells[a].length-a-1;break;case 2:l=o.naviCustomizerProgram.cells[a].length-a-1,d=o.naviCustomizerProgram.cells[a].length-n-1;break;case 3:l=o.naviCustomizerProgram.cells[a].length-n-1,d=a;break;default:l=a,d=n;break}k[a+z][n+z]=b.value?o.naviCustomizerProgram.compressedCells[l][d]:o.naviCustomizerProgram.cells[l][d]}return k}),v=()=>{S("update-program-state",i.value)},C=()=>{s.value=(s.value+1)%4,i.value.rotate=s.value,v()},B=()=>{s.value=(s.value+3)%4,i.value.rotate=s.value,v()},P=()=>{i.value.isCompressed=b.value,v()};return(z,k)=>{const a=u("v-card-title"),n=u("v-switch"),l=u("v-row"),d=u("v-icon"),r=u("v-btn"),j=u("v-col"),M=u("v-card"),N=u("v-container");return p(),I(M,{class:"container pa-2",width:"100%",height:"100%"},{default:t(()=>[g.naviCustomizerProgram?(p(),V(U,{key:0},[e(a,null,{default:t(()=>[h(W(g.naviCustomizerProgram.name),1)]),_:1}),e(N,null,{default:t(()=>[e(l,null,{default:t(()=>[e(n,{modelValue:c(b),"onUpdate:modelValue":k[0]||(k[0]=w=>O(b)?b.value=w:null),label:"圧縮",onChange:P},null,8,["modelValue"])]),_:1}),e(l,{class:"mb-4"},{default:t(()=>[e(j,null,{default:t(()=>[e(r,{onClick:C},{default:t(()=>[e(d,null,{default:t(()=>[h(" mdi-rotate-left ")]),_:1})]),_:1})]),_:1}),e(j,{align:"right"},{default:t(()=>[e(r,{onClick:B},{default:t(()=>[e(d,null,{default:t(()=>[h(" mdi-rotate-right ")]),_:1})]),_:1})]),_:1})]),_:1}),ae("div",ve,[(p(!0),V(U,null,F(c(f),(w,$)=>(p(),V("div",{key:$,class:"row"},[(p(!0),V(U,null,F(w,(x,A)=>(p(),V("div",{key:A,class:"col"},[e(M,{class:re(["elevation-0 rounded-0 cell d-flex align-center justify-center",{filled:x}]),width:"100%",height:"100%",color:x?g.naviCustomizerProgram.color:"transparent"},{default:t(()=>[x&&!g.naviCustomizerProgram.isProgram?(p(),I(d,{key:0,color:"grey-darken-3",style:{"font-size":"70px",opacity:"20%"}},{default:t(()=>[h(" mdi-plus ")]),_:1})):L("",!0)]),_:2},1032,["class","color"])]))),128))]))),128))])]),_:1})],64)):(p(),I(a,{key:1},{default:t(()=>[h(" プログラムが選択されていません ")]),_:1}))]),_:1})}}});const ge=oe(pe,[["__scopeId","data-v-422884f0"]]),be=T({__name:"navi",setup(g){const S=se(),o=ne(),s=ee(),i=R(()=>s.programs),m=y(new E),b=R(()=>m.value.cells),_=y(null),f=y({isCompressed:!0,rotate:0}),v=le(),C=R(()=>v.selectedBuild),B=te(),P=R(()=>B.naviCustomizerStatus),z=()=>{C.value&&(m.value=new E,C.value.registeredNaviCustomizerPrograms.forEach(r=>{m.value.addProgram(r)}))};q(C,r=>{r&&z()},{deep:!0}),q(m,r=>{r&&B.update(C.value.hpMemoryNum,r.registeredNaviCustomizerPrograms,r.cells)},{deep:!0}),ue(()=>{s.fetchPrograms(),v.setSelectedBuildById(o.params.id),C||S.push({path:"/"}),z()});const k=()=>{C.value&&v.updateBuildById({id:C.value.id,registeredNaviCustomizerPrograms:m.value.registeredNaviCustomizerPrograms})},a=r=>{_.value=r},n=r=>{f.value=r},l=r=>{_.value&&m.value.addProgram({...f.value,...r,id:m.value.registeredNaviCustomizerPrograms.length+1,programId:_.value.id})},d=r=>{const j=m.value.registeredNaviCustomizerPrograms.find(N=>N.id===r);if(!j)return;const M=i.value.find(N=>N.id===j.programId);m.value.removeProgram(r),_.value=M};return(r,j)=>{const M=Q,N=Y,w=u("v-container"),$=de,x=u("v-col"),A=ie,D=u("v-row"),G=u("v-divider"),H=X,J=_e,K=ge;return p(),V(U,null,[e(w,null,{default:t(()=>[e(M,null,{default:t(()=>[h(" ナビカスタマイザー ")]),_:1}),e(N,{onClick:k},{default:t(()=>[h(" 保存する ")]),_:1})]),_:1}),e(w,null,{default:t(()=>[e(D,null,{default:t(()=>[e(x,{cols:"12",sm:"6"},{default:t(()=>[e($,{"navi-customizer-status":c(P)},null,8,["navi-customizer-status"])]),_:1}),e(x,{cols:"12",sm:"6"},{default:t(()=>[e(A,{cells:c(b),"selected-program":c(_),"program-state":c(f),onAddProgram:l,onRemoveProgram:d},null,8,["cells","selected-program","program-state"])]),_:1})]),_:1})]),_:1}),e(G),e(w,null,{default:t(()=>[e(H,null,{default:t(()=>[h(" プログラム一覧 ")]),_:1}),e(D,null,{default:t(()=>[e(x,{cols:"12",sm:"6"},{default:t(()=>[e(J,{programs:c(i),"selected-program":c(_),onUpdateSelectedProgram:a},null,8,["programs","selected-program"])]),_:1}),e(x,{cols:"12",sm:"6"},{default:t(()=>[e(K,{"navi-customizer-program":c(_),onUpdateProgramState:n},null,8,["navi-customizer-program"])]),_:1})]),_:1})]),_:1})],64)}}});export{be as default};
