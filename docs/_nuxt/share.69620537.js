import{_ as oe,a as se}from"./subtitle.4ce63455.js";import{_ as re}from"./color-text.b1444b98.js";import{g as ne,_ as ce}from"./base64.d491a22a.js";import{C as ie,_ as me}from"./chip-folder.25296c77.js";import{u as de,N as U,a as _e,M as $,_ as pe}from"./megaman-status.0a64e323.js";import{u as ve,_ as fe}from"./master-patch-card.1180ec9d.js";import{e as ge,f as he,h as ye,i as Ce,k as r,j as g,l as q,m as xe,r as i,o as x,p as S,q as e,w as a,t as m,u as s,s as b,F as k,y as L,z as Ne,c as ze}from"./entry.bb13f739.js";import"./VDataTable.394959b7.js";const Se=80,Fe=ge({__name:"share",setup(be){const j=he(),G=ye(),M=Ce(),l=r(null),h=r(),y=r([]),C=r(),H=de(),J=g(()=>H.programs),d=r(new U),O=g(()=>d.value.cells),T=g(()=>d.value.registeredNaviCustomizerPrograms),N=r(new ie),P=r(0),I=r([]),D=g(()=>I.value.map(t=>N.value.chips.find(c=>c.id===t))),V=_e(),w=ve(),f=r([]),_=r(new $),K=g(()=>{let t=0;return f.value.forEach(u=>{u.isActive&&(t+=Number(u.capacity))}),t}),Q=()=>{l.value&&(f.value=l.value.patchCards.map(t=>{const u=w.getCardById(t.id);if(!u)return null;const c=u.clone();return t.isActive||c.toggleActive(),c}).filter(t=>t!==null))},W=[{key:"G",name:"グレイガ"},{key:"F",name:"ファルザー"}],B=()=>{l.value&&(d.value=new U,l.value.registeredNaviCustomizerPrograms.forEach(t=>{d.value.addProgram(t)}))},X=()=>{l.value&&(N.value.chips=l.value.folderChips.map((t,u)=>({id:u+1,chipId:t.chipId,codeIndex:t.codeIndex})).filter(t=>t!==null),l.value.regularChipId&&(P.value=l.value.regularChipId),l.value.tagChipIds&&(I.value=l.value.tagChipIds))},E=()=>{l.value&&(h.value=l.value.name,y.value=l.value.versions,C.value=l.value.hpMemoryNum,B(),X(),Q())};return q(l,t=>{t&&E()},{deep:!0}),q(f,t=>{_.value=new $,l.value&&(_.value.hpMemoryNum=l.value.hpMemoryNum,B(),V.update(l.value.hpMemoryNum,d.value.registeredNaviCustomizerPrograms,d.value.cells),V.naviCustomizerStatus.megamanStatus.abilities.forEach(u=>{_.value.abilities.push(u)}),t.forEach(u=>{u.isActive&&u.abilities.forEach(c=>{_.value.abilities.push(c)})}),_.value.apply())},{deep:!0}),xe(()=>{const t=ne.decode(M.query.key);l.value=JSON.parse(t),w.fetchCards(),j.setSelectedBuildById(M.params.id),l?E():G.push({path:"/"})}),(t,u)=>{const c=oe,F=i("v-container"),p=se,o=i("v-row"),A=i("v-text-field"),Y=i("v-checkbox"),v=i("v-col"),R=i("v-divider"),Z=re,ee=ce,ae=me,te=pe,le=fe,ue=i("v-card");return x(),S(k,null,[e(F,null,{default:a(()=>[e(c,null,{default:a(()=>[m(" ビルド概要 ")]),_:1})]),_:1}),e(F,{class:"pa-8"},{default:a(()=>[e(o,null,{default:a(()=>[e(p,null,{default:a(()=>[m(" ビルド名 ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(A,{modelValue:s(h),"onUpdate:modelValue":u[0]||(u[0]=n=>b(h)?h.value=n:null),readonly:""},null,8,["modelValue"])]),_:1}),e(o,{class:"mt-8"},{default:a(()=>[e(p,null,{default:a(()=>[m(" 対応バージョン ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[(x(),S(k,null,L(W,n=>e(v,{key:n.key},{default:a(()=>[e(Y,{modelValue:s(y),"onUpdate:modelValue":u[1]||(u[1]=z=>b(y)?y.value=z:null),label:n.name,value:n.key,readonly:""},null,8,["modelValue","label","value"])]),_:2},1024)),64))]),_:1}),e(o,null,{default:a(()=>[e(p,null,{default:a(()=>[m(" HPメモリ ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(A,{modelValue:s(C),"onUpdate:modelValue":u[2]||(u[2]=n=>b(C)?C.value=n:null),type:"number",max:"45",min:"0",readonly:""},null,8,["modelValue"])]),_:1}),e(o,{class:"mt-8"},{default:a(()=>[e(R)]),_:1}),e(o,null,{default:a(()=>[e(p,null,{default:a(()=>[m(" ナビカスタマイザー ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(v,{cols:"6",sm:"6"},{default:a(()=>[e(Z,{cells:s(O)},null,8,["cells"])]),_:1}),e(v,{cols:"6",sm:"6"},{default:a(()=>[e(ee,{"registered-navi-customizer-programs":s(T),"master-navi-customizer-programs":s(J)},null,8,["registered-navi-customizer-programs","master-navi-customizer-programs"])]),_:1})]),_:1}),e(o,{class:"mt-8"},{default:a(()=>[e(R)]),_:1}),e(o,null,{default:a(()=>[e(p,null,{default:a(()=>[m(" フォルダ ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(ae,{"chip-folder":s(N),"regular-chip-id":s(P),"tag-chips":s(D),"read-only":""},null,8,["chip-folder","regular-chip-id","tag-chips"])]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(p,null,{default:a(()=>[m(" 改造カード ")]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(v,{cols:"12"},{default:a(()=>[e(te,{"megaman-status":s(_),"max-capacity":Se,"current-capacity":s(K)},null,8,["megaman-status","current-capacity"])]),_:1})]),_:1}),e(o,null,{default:a(()=>[e(v,{class:"pa-0"},{default:a(()=>[e(ue,{class:Ne(["px-0 mt-4 mx-0",{"py-8":s(f).length===0}]),color:"primary"},{default:a(()=>[(x(!0),S(k,null,L(s(f),(n,z)=>(x(),ze(le,{key:z,"patch-card":n,class:"ma-4"},null,8,["patch-card"]))),128))]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})],64)}}});export{Fe as default};
