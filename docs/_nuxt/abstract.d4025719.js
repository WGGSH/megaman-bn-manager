import{_ as be}from"./accept.4c401071.js";import{a as X,r as c,o as V,c as Y,w as t,b as ke,e as Se,f as Ne,h as Ve,i as ze,j as _,k as d,l as O,m as Be,p as P,q as e,u as n,s as N,t as s,v as Ie,x as Me,F as $,y as K,z as we,A as Pe}from"./entry.2aacb420.js";import{_ as $e,a as Ue}from"./subtitle.e3c1a556.js";import{_ as Ee}from"./color-text.f829fdc1.js";import{g as Fe,_ as Re}from"./base64.39981dcf.js";import{C as Ae,_ as Le}from"./chip-folder.cc4f2b2f.js";import{u as De,N as Q,a as Te,M as W,_ as je}from"./megaman-status.1f33a995.js";import{u as qe,_ as Ge}from"./master-patch-card.ebead487.js";import"./VDataTable.121a0de6.js";const He={};function Je(U,h){const z=c("v-btn");return V(),Y(z,{color:"red"},{default:t(()=>[ke(U.$slots,"default")]),_:3})}const Oe=X(He,[["render",Je]]),Ke=["href"],Qe=80,We=Se({__name:"abstract",setup(U){const h=Ne(),z=Ve(),Z=ze(),l=_(()=>h.selectedBuild),C=d(),y=d([]),x=d(),b=d(!1),k=d(!1),ee=De(),te=_(()=>ee.programs),m=d(new Q),ae=_(()=>m.value.cells),le=_(()=>m.value.registeredNaviCustomizerPrograms),B=d(new Ae),E=d(0),F=d([]),oe=_(()=>F.value.map(o=>B.value.chips.find(i=>i.id===o))),R=Te(),A=qe(),S=d([]),p=d(new W),ne=_(()=>{let o=0;return S.value.forEach(a=>{a.isActive&&(o+=Number(a.capacity))}),o}),ue=()=>{l.value&&(S.value=l.value.patchCards.map(o=>{const a=A.getCardById(o.id);if(!a)return null;const i=a.clone();return o.isActive||i.toggleActive(),i}).filter(o=>o!==null))},se=[{key:"G",name:"グレイガ"},{key:"F",name:"ファルザー"}],L=()=>{l.value&&(m.value=new Q,l.value.registeredNaviCustomizerPrograms.forEach(o=>{m.value.addProgram(o)}))},re=()=>{l.value&&(B.value.chips=l.value.folderChips.map((o,a)=>({id:a+1,chipId:o.chipId,codeIndex:o.codeIndex})).filter(o=>o!==null),l.value.regularChipId&&(E.value=l.value.regularChipId),l.value.tagChipIds&&(F.value=l.value.tagChipIds))},D=()=>{!l.value||!l.value.id||(C.value=l.value.name,y.value=l.value.versions,x.value=l.value.hpMemoryNum,L(),re(),ue())};O(l,o=>{o&&D()},{deep:!0}),O(S,o=>{p.value=new W,l.value&&(p.value.hpMemoryNum=l.value.hpMemoryNum,L(),R.update(l.value.hpMemoryNum,m.value.registeredNaviCustomizerPrograms,m.value.cells),R.naviCustomizerStatus.megamanStatus.abilities.forEach(a=>{p.value.abilities.push(a)}),o.forEach(a=>{a.isActive&&a.abilities.forEach(i=>{p.value.abilities.push(i)})}),p.value.apply())},{deep:!0}),Be(()=>{A.fetchCards(),h.setSelectedBuildById(Z.params.id),l?D():z.push({path:"/"})});const ce=()=>{h.updateBuildById({id:l.value.id,name:C.value,versions:y.value,hpMemoryNum:x.value})},ie=()=>{b.value=!0},I=_(()=>{if(!l.value)return"";const{location:o}=window,a={...l.value,id:void 0},i=Pe();return`${`${o.origin}${i.public.baseURL}`}share?key=${Fe.encode(JSON.stringify(a))}`}),de=()=>{navigator.clipboard.writeText(I.value)},_e=()=>{k.value=!0},me=()=>{h.deleteBuildById(l.value.id),z.push({path:"/"})};return(o,a)=>{const i=c("v-card-title"),v=be,T=Oe,j=c("v-card-actions"),M=c("v-card"),q=c("v-dialog"),pe=c("v-card-text"),ve=$e,u=c("v-row"),G=c("v-container"),f=Ue,H=c("v-text-field"),fe=c("v-checkbox"),g=c("v-col"),J=c("v-divider"),ge=Ee,he=Re,Ce=Le,ye=je,xe=Ge;return V(),P($,null,[e(G,null,{default:t(()=>[e(q,{modelValue:n(b),"onUpdate:modelValue":a[1]||(a[1]=r=>N(b)?b.value=r:null)},{default:t(()=>[e(M,null,{default:t(()=>[e(i,null,{default:t(()=>[s(" 本当に削除しますか？ ")]),_:1}),e(j,null,{default:t(()=>[e(v,{onClick:a[0]||(a[0]=r=>b.value=!1)},{default:t(()=>[s(" キャンセル ")]),_:1}),e(T,{color:"red",onClick:me},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:n(k),"onUpdate:modelValue":a[3]||(a[3]=r=>N(k)?k.value=r:null)},{default:t(()=>[e(M,null,{default:t(()=>[e(i,null,{default:t(()=>[s(" 共有用URL ")]),_:1}),e(pe,null,{default:t(()=>[Ie("a",{href:n(I),target:"_blank",rel:"noopener noreferrer"},Me(n(I)),9,Ke)]),_:1}),e(j,null,{default:t(()=>[e(v,{onClick:de},{default:t(()=>[s(" クリップボードにコピー ")]),_:1}),e(v,{onClick:a[2]||(a[2]=r=>k.value=!1)},{default:t(()=>[s(" 閉じる ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ve,null,{default:t(()=>[s(" ビルド概要 ")]),_:1}),e(u,{class:"ma-0"},{default:t(()=>[e(v,{onClick:ce},{default:t(()=>[s(" 保存する ")]),_:1}),e(v,{class:"mr-auto ml-4",onClick:_e},{default:t(()=>[s(" 共有する ")]),_:1}),e(T,{onClick:ie},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1}),e(G,{class:"pa-8"},{default:t(()=>[e(u,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" ビルド名 ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(H,{modelValue:n(C),"onUpdate:modelValue":a[4]||(a[4]=r=>N(C)?C.value=r:null)},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(f,null,{default:t(()=>[s(" 対応バージョン ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[(V(),P($,null,K(se,r=>e(g,{key:r.key},{default:t(()=>[e(fe,{modelValue:n(y),"onUpdate:modelValue":a[5]||(a[5]=w=>N(y)?y.value=w:null),label:r.name,value:r.key},null,8,["modelValue","label","value"])]),_:2},1024)),64))]),_:1}),e(u,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" HPメモリ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(H,{modelValue:n(x),"onUpdate:modelValue":a[6]||(a[6]=r=>N(x)?x.value=r:null),type:"number",max:"45",min:"0"},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(J)]),_:1}),e(u,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" ナビカスタマイザー ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(g,{cols:"6",sm:"6"},{default:t(()=>[e(ge,{cells:n(ae)},null,8,["cells"])]),_:1}),e(g,{cols:"6",sm:"6"},{default:t(()=>[e(he,{"registered-navi-customizer-programs":n(le),"master-navi-customizer-programs":n(te)},null,8,["registered-navi-customizer-programs","master-navi-customizer-programs"])]),_:1})]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(J)]),_:1}),e(u,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" フォルダ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(Ce,{"chip-folder":n(B),"regular-chip-id":n(E),"tag-chips":n(oe),"read-only":""},null,8,["chip-folder","regular-chip-id","tag-chips"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,null,{default:t(()=>[s(" 改造カード ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(g,{cols:"12"},{default:t(()=>[e(ye,{"megaman-status":n(p),"max-capacity":Qe,"current-capacity":n(ne)},null,8,["megaman-status","current-capacity"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(g,{class:"pa-0"},{default:t(()=>[e(M,{class:we(["px-0 mt-4 mx-0",{"py-8":n(S).length===0}]),color:"primary"},{default:t(()=>[(V(!0),P($,null,K(n(S),(r,w)=>(V(),Y(xe,{key:w,"patch-card":r,class:"ma-4"},null,8,["patch-card"]))),128))]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})],64)}}});const ut=X(We,[["__scopeId","data-v-84ca6f9f"]]);export{ut as default};
