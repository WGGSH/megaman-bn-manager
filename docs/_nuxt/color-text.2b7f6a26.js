var E=Object.defineProperty;var T=(v,m,s)=>m in v?E(v,m,{enumerable:!0,configurable:!0,writable:!0,value:s}):v[m]=s;var B=(v,m,s)=>(T(v,typeof m!="symbol"?m+"":m,s),s);import{e as L,k as N,j as V,r as I,o as _,c as w,w as C,p as k,F as x,y as M,u as $,q as F,z as O,t as A,B as R,a as W}from"./entry.c6c04730.js";const D=["red","blue","green","yellow","pink","white"],u=11,G=L({__name:"navi-customizer",props:{cells:{type:Array,required:!0},selectedProgram:{type:Object,required:!1,default:null},programState:{type:Object,required:!1,default:null}},emits:["add-program","remove-program"],setup(v,{emit:m}){const s=v,P=N(null),h=V(()=>{var t,o;const c=[];for(let e=0;e<u;e+=1){c.push([]);for(let a=0;a<u;a+=1)c[e].push({programId:null,registeredProgramId:null,color:"transparent",isProgram:!1})}for(let e=0;e<s.cells.length;e+=1)for(let a=0;a<s.cells[e].length;a+=1)c[e+2][a+2]=s.cells[e][a];if(P.value!==null&&s.selectedProgram){const e=s.programState.isCompressed?(t=s.selectedProgram)==null?void 0:t.compressedCells:(o=s.selectedProgram)==null?void 0:o.cells;if(e){const a=P.value.y,n=P.value.x;e.forEach((d,r)=>{d.forEach((g,l)=>{var i,b,y;if(!(a+r<0||a+r>=u)&&!(n+l<0||n+l>=u)&&g){let f,p;switch(s.programState.rotate){case 0:f=r,p=l;break;case 1:f=e.length-l-1,p=r;break;case 2:f=e.length-r-1,p=e[r].length-l-1;break;case 3:f=l,p=e[r].length-r-1;break;default:f=r,p=l;break}if(a+f<0||a+f>=u||n+p<0||n+p>=u)return;c[a+f][n+p]&&(c[a+f][n+p]={programId:(i=s.selectedProgram)==null?void 0:i.id,color:(b=s.selectedProgram)==null?void 0:b.color,isProgram:(y=s.selectedProgram)==null?void 0:y.isProgram})}})})}}return c}),S=c=>{var a,n;const{y:t,x:o}=c,e=s.programState.isCompressed?(a=s.selectedProgram)==null?void 0:a.compressedCells:(n=s.selectedProgram)==null?void 0:n.cells;if(e){let d=!1;for(let r=0;r<e.length;r+=1)for(let g=0;g<e[r].length;g+=1)if(e[r][g]){let l,i;switch(s.programState.rotate){case 0:l=r,i=g;break;case 1:l=e.length-g-1,i=r;break;case 2:l=e.length-r-1,i=e[r].length-g-1;break;case 3:l=g,i=e[r].length-r-1;break;default:l=r,i=g;break}if(t+l<2||t+l>=u-2||o+i<2||o+i>=u-2||t+l===2&&o+i===2||t+l===2&&o+i===u-3||t+l===u-3&&o+i===2||t+l===u-3&&o+i===u-3||D.includes(s.cells[t+l-2][o+i-2].color))return;t+l>=3&&t+l<=7&&o+i>=3&&o+i<=7&&(d=!0)}if(!d)return}m("add-program",{x:o-2,y:t-2},s.programState)},X=c=>{const{y:t,x:o}=c,{targetY:e,targetX:a}={targetY:t-2,targetX:o-2};if(e<0||e>=u-4||a<0||a>=u-4)return;const{registeredProgramId:n}=s.cells[e][a];n&&m("remove-program",n,null)},Y=c=>{const{y:t,x:o}=c;let[e,a,n,d]=[!0,!0,!0,!0];const r=h.value[t][o];return t>0&&h.value[t-1][o].registeredProgramId===r.registeredProgramId&&(e=!1),t<u-1&&h.value[t+1][o].registeredProgramId===r.registeredProgramId&&(a=!1),o<u-1&&h.value[t][o+1].registeredProgramId===r.registeredProgramId&&(n=!1),o>0&&h.value[t][o-1].registeredProgramId===r.registeredProgramId&&(d=!1),{transparent:h.value[t][o].color==="transparent","elevation-0":h.value[t][o].color==="transparent","has-border-top":e,"has-border-bottom":a,"has-border-right":n,"has-border-left":d}},j=c=>{P.value=c},q=()=>{P.value=null},z=c=>{s.selectedProgram?S(c):X(c)};return(c,t)=>{const o=I("v-icon"),e=I("v-card");return _(),w(e,{class:"pa-8"},{default:C(()=>[(_(!0),k(x,null,M($(h),(a,n)=>(_(),k("div",{key:n,class:"grid"},[(_(!0),k(x,null,M(a,(d,r)=>(_(),k("div",{key:r},[F(e,{class:O(["pa-5 elevation-1 rounded-0 cell",Y({y:n,x:r})]),width:"100%",height:"100%",color:d.color,onMouseenter:g=>j({y:n,x:r}),onMouseleave:t[0]||(t[0]=g=>q()),onClick:g=>z({y:n,x:r})},{default:C(()=>[d.programId&&!d.isProgram?(_(),w(o,{key:0,color:"grey-darken-3",class:"plus-part"},{default:C(()=>[A(" mdi-plus ")]),_:1})):R("",!0)]),_:2},1032,["class","color","onMouseenter","onClick"])]))),128))]))),128))]),_:1})}}});const Q=W(G,[["__scopeId","data-v-17fa444a"]]);class H{}B(H,"colorToTextMap",{red:"赤",blue:"青",green:"緑",yellow:"黄",pink:"ピンク",white:"白"});export{H as C,Q as _};
