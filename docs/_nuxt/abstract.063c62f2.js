import{_ as be}from"./accept.d840275c.js";import{a as X,r as c,o as V,c as Y,w as t,b as ke,e as Se,f as Ne,h as Ve,i as ze,j as _,k as i,l as O,m as Be,p as P,q as e,u as n,s as N,t as s,v as Ie,x as Me,F as $,y as K,z as we}from"./entry.bb13f739.js";import{_ as Pe,a as $e}from"./subtitle.4ce63455.js";import{_ as Ue}from"./color-text.b1444b98.js";import{g as Ee,_ as Fe}from"./base64.d491a22a.js";import{C as Ae,_ as Re}from"./chip-folder.25296c77.js";import{u as De,N as Q,a as Le,M as W,_ as Te}from"./megaman-status.0a64e323.js";import{u as je,_ as qe}from"./master-patch-card.1180ec9d.js";import"./VDataTable.394959b7.js";const Ge={};function He(U,g){const z=c("v-btn");return V(),Y(z,{color:"red"},{default:t(()=>[ke(U.$slots,"default")]),_:3})}const Je=X(Ge,[["render",He]]),Oe=["href"],Ke=80,Qe=Se({__name:"abstract",setup(U){const g=Ne(),z=Ve(),Z=ze(),l=_(()=>g.selectedBuild),h=i(),C=i([]),y=i(),x=i(!1),b=i(!1),ee=De(),te=_(()=>ee.programs),m=i(new Q),ae=_(()=>m.value.cells),le=_(()=>m.value.registeredNaviCustomizerPrograms),B=i(new Ae),E=i(0),F=i([]),oe=_(()=>F.value.map(o=>B.value.chips.find(d=>d.id===o))),A=Le(),R=je(),k=i([]),p=i(new W),ne=_(()=>{let o=0;return k.value.forEach(a=>{a.isActive&&(o+=Number(a.capacity))}),o}),ue=()=>{l.value&&(k.value=l.value.patchCards.map(o=>{const a=R.getCardById(o.id);if(!a)return null;const d=a.clone();return o.isActive||d.toggleActive(),d}).filter(o=>o!==null))},se=[{key:"G",name:"グレイガ"},{key:"F",name:"ファルザー"}],D=()=>{l.value&&(m.value=new Q,l.value.registeredNaviCustomizerPrograms.forEach(o=>{m.value.addProgram(o)}))},re=()=>{l.value&&(B.value.chips=l.value.folderChips.map((o,a)=>({id:a+1,chipId:o.chipId,codeIndex:o.codeIndex})).filter(o=>o!==null),l.value.regularChipId&&(E.value=l.value.regularChipId),l.value.tagChipIds&&(F.value=l.value.tagChipIds))},L=()=>{!l.value||!l.value.id||(h.value=l.value.name,C.value=l.value.versions,y.value=l.value.hpMemoryNum,D(),re(),ue())};O(l,o=>{o&&L()},{deep:!0}),O(k,o=>{p.value=new W,l.value&&(p.value.hpMemoryNum=l.value.hpMemoryNum,D(),A.update(l.value.hpMemoryNum,m.value.registeredNaviCustomizerPrograms,m.value.cells),A.naviCustomizerStatus.megamanStatus.abilities.forEach(a=>{p.value.abilities.push(a)}),o.forEach(a=>{a.isActive&&a.abilities.forEach(d=>{p.value.abilities.push(d)})}),p.value.apply())},{deep:!0}),Be(()=>{R.fetchCards(),g.setSelectedBuildById(Z.params.id),l?L():z.push({path:"/"})});const ce=()=>{g.updateBuildById({id:l.value.id,name:h.value,versions:C.value,hpMemoryNum:y.value})},ie=()=>{x.value=!0},I=_(()=>{if(!l.value)return"";const{location:o}=window,a={...l.value,id:void 0};return`${o.origin}/share?key=${Ee.encode(JSON.stringify(a))}`}),de=()=>{navigator.clipboard.writeText(I.value)},_e=()=>{b.value=!0},me=()=>{g.deleteBuildById(l.value.id),z.push({path:"/"})};return(o,a)=>{const d=c("v-card-title"),S=be,T=Je,j=c("v-card-actions"),M=c("v-card"),q=c("v-dialog"),pe=c("v-card-text"),ve=Pe,u=c("v-row"),G=c("v-container"),v=$e,H=c("v-text-field"),fe=c("v-checkbox"),f=c("v-col"),J=c("v-divider"),ge=Ue,he=Fe,Ce=Re,ye=Te,xe=qe;return V(),P($,null,[e(G,null,{default:t(()=>[e(q,{modelValue:n(x),"onUpdate:modelValue":a[1]||(a[1]=r=>N(x)?x.value=r:null)},{default:t(()=>[e(M,null,{default:t(()=>[e(d,null,{default:t(()=>[s(" 本当に削除しますか？ ")]),_:1}),e(j,null,{default:t(()=>[e(S,{onClick:a[0]||(a[0]=r=>x.value=!1)},{default:t(()=>[s(" キャンセル ")]),_:1}),e(T,{color:"red",onClick:me},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:n(b),"onUpdate:modelValue":a[3]||(a[3]=r=>N(b)?b.value=r:null)},{default:t(()=>[e(M,null,{default:t(()=>[e(d,null,{default:t(()=>[s(" 共有用URL ")]),_:1}),e(pe,null,{default:t(()=>[Ie("a",{href:n(I),target:"_blank",rel:"noopener noreferrer"},Me(n(I)),9,Oe)]),_:1}),e(j,null,{default:t(()=>[e(S,{onClick:de},{default:t(()=>[s(" クリップボードにコピー ")]),_:1}),e(S,{onClick:a[2]||(a[2]=r=>b.value=!1)},{default:t(()=>[s(" 閉じる ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ve,null,{default:t(()=>[s(" ビルド概要 ")]),_:1}),e(u,{class:"ma-0"},{default:t(()=>[e(S,{onClick:ce},{default:t(()=>[s(" 保存する ")]),_:1}),e(S,{class:"mr-auto ml-4",onClick:_e},{default:t(()=>[s(" 共有する ")]),_:1}),e(T,{onClick:ie},{default:t(()=>[s(" 削除する ")]),_:1})]),_:1})]),_:1}),e(G,{class:"pa-8"},{default:t(()=>[e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[s(" ビルド名 ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(H,{modelValue:n(h),"onUpdate:modelValue":a[4]||(a[4]=r=>N(h)?h.value=r:null)},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(v,null,{default:t(()=>[s(" 対応バージョン ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[(V(),P($,null,K(se,r=>e(f,{key:r.key},{default:t(()=>[e(fe,{modelValue:n(C),"onUpdate:modelValue":a[5]||(a[5]=w=>N(C)?C.value=w:null),label:r.name,value:r.key},null,8,["modelValue","label","value"])]),_:2},1024)),64))]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[s(" HPメモリ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(H,{modelValue:n(y),"onUpdate:modelValue":a[6]||(a[6]=r=>N(y)?y.value=r:null),type:"number",max:"45",min:"0"},null,8,["modelValue"])]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(J)]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[s(" ナビカスタマイザー ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{cols:"6",sm:"6"},{default:t(()=>[e(ge,{cells:n(ae)},null,8,["cells"])]),_:1}),e(f,{cols:"6",sm:"6"},{default:t(()=>[e(he,{"registered-navi-customizer-programs":n(le),"master-navi-customizer-programs":n(te)},null,8,["registered-navi-customizer-programs","master-navi-customizer-programs"])]),_:1})]),_:1}),e(u,{class:"mt-8"},{default:t(()=>[e(J)]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[s(" フォルダ ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(Ce,{"chip-folder":n(B),"regular-chip-id":n(E),"tag-chips":n(oe),"read-only":""},null,8,["chip-folder","regular-chip-id","tag-chips"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(v,null,{default:t(()=>[s(" 改造カード ")]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{cols:"12"},{default:t(()=>[e(ye,{"megaman-status":n(p),"max-capacity":Ke,"current-capacity":n(ne)},null,8,["megaman-status","current-capacity"])]),_:1})]),_:1}),e(u,null,{default:t(()=>[e(f,{class:"pa-0"},{default:t(()=>[e(M,{class:we(["px-0 mt-4 mx-0",{"py-8":n(k).length===0}]),color:"primary"},{default:t(()=>[(V(!0),P($,null,K(n(k),(r,w)=>(V(),Y(xe,{key:w,"patch-card":r,class:"ma-4"},null,8,["patch-card"]))),128))]),_:1},8,["class"])]),_:1})]),_:1})]),_:1})],64)}}});const nt=X(Qe,[["__scopeId","data-v-1355289b"]]);export{nt as default};
